## Введение
Целью данного проекта выступает поиск способа использования raspberry pi в бытовых целях, принимая во внимание аппаратные ресурсы одноплатного компьютера с оглядкой на бытовые потребности можно сделать вывод, что устройство является оптимальным для создания домашнего сервера по следующим причинам:
1) Энергоэффективность - потребляемая мощность устройством от сети составляет 4 ватта, что от 25 раз меньше, чем в случае с вариантом использования аппаратных возможностей десктопного компьютера.
2) Производительность - для небольшого домашнего сервера не требуется больших аппаратных возможностей устройства.
3) Компактность - устройство имеет малые габариты, благодаря чему не занимает много места.
 
Для домашнего использования применимы следующие операционные системы:

• Pi-Hole – это сервер доменных имён, включающий в себя блокировку рекламы и трекеров на уровне DNS. Данная система имеет открытый исходный код. Из плюсов можно выделить удаление с интернет страниц рекламы и снижение нагрузки на сетевой канал за счёт выборочной загрузки данных. Выборность обусловлена отсеиванием лишних элементов. Для управления и настройки фильтрации доступен веб-интерфейс.

• CUPS – сервер печати. Данная система позволяет одновременно использовать обычный usb-принтер несколькими устройствами. Основным преимуществом такого решения является постоянная доступность принтера для любого домашнего устройства. Для администрирования CUPS имеет встроенный веб-интерфейс администрирования. Однако, существует также множество графических средств настройки CUPS. Например, среда GNOME содержит утилиту gnome-cups-manager, позволяющую администрировать CUPS, а в среде KDE используются средства администрирования, специфичные для различных дистрибутивов.

• Home assistant – данная операционная система является хост сервером умного дома. Данная система позволяет объединить в одну систему решения практически для всех компонентов Home Automation различных производителей. Также к её преимуществам можно отнести открытый исходный код, что позволяет разрабатывать плагины для взаимодействия с любым оборудованием и поддержку всех существующих стандартов управления умными устройствами. К недостаткам данной системы умного дома можно отнести необходимость установки домашнего сервера и требования к определенному уровню компетенции пользователя. Для управления данная система может оснащаться графическим интерфейсом, имеет веб-интерфейс и мобильное приложение.

После определения систем для установки необходимо определить способ организации работы нескольких серверов на одном аппаратном устройстве. Первоначально был рассмотрен вариант с использованием систем виртуализации. В частности, был рассмотрен вариант установки на raspberry Pi системы proxmox, которая имеет адаптацию под одноплатный компьютер именуемую pimox.
	Proxmox Virtual Environment — это система, предоставляющая веб-интерфейс для управления виртуальными машинами (используется KVM) и контейнерами (LXC) на вашем кластере физических машин.
Однако такой вариант организации системы оказался неэффективным по большей части из-за избыточной нагрузки на аппаратную часть, создаваемой системой виртуализации.
	Наиболее оптимальным вариантом стала установка основной серверной операционной системы и последующая установка на неё выбранных систем в формате приложений. В качестве основной системы была выбрана Ubuntu server. По причине простоты настройки, приемлемой нагрузки на аппаратное обеспечение и доступности всех плагинов, необходимых для организации подобных серверов.

В процессе работы над проектом потребуется выполнить следующие задачи:

1) Установить серверную операционную систему на Raspberry Pi.
2) Настроить SSH
3) Выполнить установку Pi-Hole и его настройку, связать с домашним роутером.
4) Установить и настроить CUPS
5) Осуществить установку Home Assistant, осуществить добавление умных устройств.

## Установка Ubuntu Server


Первым делом требуется обеспечить аппаратную часть программным комплексом. Для установки операционной системы необходимо отформатировать SD-карту в формате файловой системы FAT32.
После форматирования выполняется запись образа системы при помощи программы Raspberry Pi Imager
 

![image](https://user-images.githubusercontent.com/41922095/153766633-55475a40-9707-4ca8-ba19-3e9729252cde.png)

### Рисунок 1 – интерфейс Raspberry Pi Imager

После создания образа карта памяти устанавливается в одноплатный компьютер. В процессе установки требуется выбрать язык, раскладку клавиатуры, регион, часовой пояс.
Ubuntu server по умолчанию не имеет графической оболочки, что снижает нагрузку на аппаратную часть, однако управление системой осуществляется при помощи консольных команд. При первом включении необходимо выполнить первоначальную конфигурацию устройства. 

## Настройка SSH


После установки системы требуется настроить удалённое подключение для упрощения последующего конфигурирования и администрирования. Для этих целей можно использовать протоколы telnet, либо SSH. В данном случае был выбран протокол SSH, поскольку он является более безопасным.
Начнем с открытия окна терминала и ввода необходимых команд:

1.Пакет, необходимый для запуска SSH-сервера, предоставляется компонентом openssh-server из OpenSSH:

sudo apt install openssh-server

2.После завершения загрузки и установки пакета служба SSH должна быть уже запущена, для проверки статуса службы используется следующая команда:

service ssh status

3.Ubuntu поставляется с утилитой межсетевого экрана под названием UFW (UncomplicatedFirewall), которая представляет собой интерфейс для iptables, который, в свою очередь, управляет сетевыми правилами. Если брандмауэр активен, он может помешать подключению к SSH-серверу.

Чтобы настроить UFW так, чтобы он разрешал требуемый доступ, необходимо выполнить следующую команду:

sudo ufw allow ssh

Конфигурация на стороне сервера завершена. Перед установкой удалённого подключения выполним привязку статического IP к существующему mac-адресу устройства, это необходимо для того, чтобы устройство не получало разные ip-адреса по DHCP.


![image](https://user-images.githubusercontent.com/41922095/155372942-61c04fc1-e450-44c0-857f-88bdc577f34e.png)

### Рисунок 2 - настройка статического IP-адреса.

После настройки сатического IP-адреса выполним тестовое подключение. Подключение с компьютера осуществляется с помощью расширения Secure Shell для браузера Google Chrome.


![image](https://user-images.githubusercontent.com/41922095/155374511-1ab0967f-2965-4e72-a140-0b68af2057db.png)

### Рисунок 3 - удалённое подключение к серверу.

## Настройка удаленного сервера


Приступаем к конфигурированию удаленного сервера. Первым компонентом для установки является Pi-Hole. Перед его установкой требуется установить инструмент network manager, который позволяет осуществлять управление сетевым подключением. Для установки "Network manager" требуется ввести команду:

#### apt install network manager

После установки инструмента "Network manager" для установки Pi-Hole воспользуемся следующей командой:

#### curl -sSL https://install.pi-hole.net | bash

В конце установки у нас появится IP-адрес по которому будет доступен web-интерфейс для настройки компонента.


![2021-09-26_18-02-46](https://user-images.githubusercontent.com/41922095/160289508-34c17907-4cb1-4aed-aca8-96e2ca972575.png)

### Рисунок 4 - установка Pi-Hole
